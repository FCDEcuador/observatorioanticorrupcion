function loadMenuItems(e,n){var t=$("#menu_id").val(),o="";o=""!=t?e+"/"+t:e,$.get(o,function(e){var t=$("#menu_item_id");t.empty(),t.append("<option value=''>Seleccione el item de menu de nivel superior</option>"),!0===e.status&&$.each(e.menuItems,function(e,o){o.id==(n||0)?t.append("<option value='"+o.id+"' selected='selected'>"+o.name+"</option>"):t.append("<option value='"+o.id+"'>"+o.name+"</option>")})})}function internalLinks(){var e=$("#type").val();"I"==e?($("#internal_links").removeAttr("disabled"),$("#target").val("_self"),$("#link").attr("readonly","readonly")):"E"==e?($("#internal_links").attr("disabled","disabled"),$("#target").val("_blank"),$("#link").removeAttr("readonly")):($("#internal_links").removeAttr("disabled"),$("#target").val("_self"),$("#link").attr("readonly","readonly"))}function loadLink(){$("#link").val($("#internal_links").val())}var FormMenuItemValidation=function(){var e=function(){var e=$("#menuItemForm"),n=$(".alert-danger",e),t=$(".alert-success",e);e.validate({errorElement:"div",errorClass:"form-control-feedback",focusInvalid:!0,ignore:"",rules:{},messages:{},invalidHandler:function(e,o){t.hide(),n.show()},errorPlacement:function(e,n){n.is(":checkbox")?e.insertAfter(n.closest(".md-checkbox-list, .md-checkbox-inline, .checkbox-list, .checkbox-inline")):n.is(":radio")?e.insertAfter(n.closest(".md-radio-list, .md-radio-inline, .radio-list,.radio-inline")):e.insertAfter(n)},highlight:function(e){$(e).closest(".form-group").addClass("has-danger"),$(e).closest(".form-control").addClass("form-control-danger")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-danger"),$(e).closest(".form-control").removeClass("form-control-danger")},success:function(e){e.closest(".form-group").removeClass("has-danger"),e.closest(".form-control").removeClass("form-control-danger")},submitHandler:function(e){t.show(),n.hide();var o=Ladda.create(document.querySelector("#menuItemBtn"));o.start(),o.setProgress(-1),$.ajax({type:$(e).attr("method"),url:$(e).attr("action"),data:$(e).serialize(),dataType:"json",beforeSend:function(){o.start()},success:function(e){!0===e.status?renderSection(urlMenuItemsList):swal({title:"BlaudCMS :: Items de Menú",text:e.message,type:"error",allowOutsideClick:!0,showConfirmButton:!0,showCancelButton:!1,confirmButtonClass:"text-danger",cancelButtonClass:"",closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",cancelButtonText:""}),o.stop()},error:function(e){var n="",t="",e=e.responseJSON;$.each(e.errors,function(e,n){t+="\n"+n}),n=""!=t?"Ups! no se pudo actualizar la informacion debido a los siguientes errores: "+t:"Ups! parece que de momento el sistema no está disponible, por favor intentalo nuevamente en unos minutos.",swal({title:"BlaudCMS :: Items de Menú",text:n,type:"error",allowOutsideClick:!0,showConfirmButton:!0,showCancelButton:!1,confirmButtonClass:"text-danger",cancelButtonClass:"",closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",cancelButtonText:""}),o.stop()}})}})};return{init:function(){e()}}}();$(document).ready(function(){FormMenuItemValidation.init(),loadMenuItems(urlMenuItemsListJson,sMenuItemId),internalLinks()});
