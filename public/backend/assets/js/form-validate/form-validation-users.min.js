function toggle(e,a){checkboxes=document.getElementsByName(a);for(var r=0,o=checkboxes.length;r<o;r++)checkboxes[r].checked=e.checked}var FormUserValidation=function(){var e=function(){function e(){return $("#password").val().length>0}var a=$("#userForm"),r=$(".alert-danger",a),o=$(".alert-success",a);a.steps({headerTag:"h6",bodyTag:"section",transitionEffect:"fade",titleTemplate:'<span class="step">#index#</span> #title#',labels:{next:"Siguiente",previous:"Anterior",finish:"Validar"},onStepChanging:function(e,r,o){return r>o||!(3===o&&Number($("#age-2").val())<18)&&(r<o&&(a.find(".body:eq("+o+") label.error").remove(),a.find(".body:eq("+o+") .error").removeClass("error")),a.validate().settings.ignore=":disabled,:hidden",a.valid())},onFinishing:function(e,r){return a.validate().settings.ignore=":disabled",a.valid()},onFinished:function(e,a){$("#userBtn").show()}}),a.validate({errorElement:"div",errorClass:"form-control-feedback",focusInvalid:!0,ignore:"",rules:{name:{minlength:2,required:!0},lastname:{minlength:2,required:!0},email:{required:!0,email:!0,remote:{url:urlValidateUser,type:"post",data:{email:function(){return $("#email").val()}}}},avatar:{accept:"image/*"},password:{required:e,minlength:{param:6,depends:e},maxlength:{param:12,depends:e}},password_confirmation:{required:e,minlength:{param:6,depends:e},maxlength:{param:12,depends:e},equalTo:{param:"#password",depends:e}},"roles[]":{required:!0,minlength:1}},messages:{name:{required:"El nombre del usuario es obligatorio",minlength:jQuery.validator.format("El nombre del usuario debe tener al menos {0} caracteres.")},lastname:{required:"El apellido del usuario es obligatorio",minlength:jQuery.validator.format("El apellido del usuario debe tener al menos {0} caracteres.")},email:{required:"Por favor ingrese el email del usuario.",email:"Por favor ingrese un email válido.",remote:"Ya existe un usuario con esa direccion de email. Por favor ingrese otra"},avatar:{accept:"Unicamente se aceptan archivos de imagenes"},password:{required:"Por favor ingrese la clave del usuario",minlength:jQuery.validator.format("Por favor ingrese al menos {0} caracteres")},password_confirmation:{required:"Por favor ingrese la confirmación de la clave del usuario",minlength:jQuery.validator.format("Por favor ingrese al menos {0} caracteres"),equalTo:"La clave y la confirmación no coinciden"},"roles[]":{required:"Por favor seleccione el(los) roles para este usuario",minlength:jQuery.validator.format("Seleccione Al menos {0} rol(es)")}},invalidHandler:function(e,a){o.hide(),r.show()},errorPlacement:function(e,a){a.is(":checkbox")?e.insertAfter(a.closest(".md-checkbox-list, .md-checkbox-inline, .checkbox-list, .checkbox-inline")):a.is(":radio")?e.insertAfter(a.closest(".md-radio-list, .md-radio-inline, .radio-list,.radio-inline")):e.insertAfter(a)},highlight:function(e){$(e).closest(".form-group").addClass("has-danger"),$(e).closest(".form-control").addClass("form-control-danger")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-danger"),$(e).closest(".form-control").removeClass("form-control-danger")},success:function(e){e.closest(".form-group").removeClass("has-danger"),e.closest(".form-control").removeClass("form-control-danger")},submitHandler:function(e){o.show(),r.hide();var a=Ladda.create(document.querySelector("#userBtn"));a.start(),a.setProgress(-1);var n=new FormData;$("#avatar")[0].files[0]&&n.append("avatar",$("#avatar")[0].files[0]);var t=$(e).serializeArray();$.each(t,function(e,a){n.append(a.name,a.value)}),$.ajax({type:$(e).attr("method"),url:$(e).attr("action"),data:n,cache:!1,contentType:!1,processData:!1,beforeSend:function(){a.start()},success:function(e){!0===e.status?renderSection(urlUsersList):swal({title:"BlaudCMS :: Usuarios",text:e.message,type:"error",allowOutsideClick:!0,showConfirmButton:!0,showCancelButton:!1,confirmButtonClass:"text-danger",cancelButtonClass:"",closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",cancelButtonText:""}),a.stop()},error:function(e){var r="",o="",e=e.responseJSON;$.each(e.errors,function(e,a){o+="\n"+a}),r=""!=o?"Ups! no se pudo actualizar la informacion debido a los siguientes errores: "+o:"Ups! parece que de momento el sistema no está disponible, por favor intentalo nuevamente en unos minutos.",swal({title:"BlaudCMS :: Usuarios",text:r,type:"error",allowOutsideClick:!0,showConfirmButton:!0,showCancelButton:!1,confirmButtonClass:"text-danger",cancelButtonClass:"",closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",cancelButtonText:""}),a.stop()}})}})};return{init:function(){e()}}}();$(document).ready(function(){$(".validation-wizard").show();$("#userBtn").hide(),FormUserValidation.init(),$("#avatar").dropify({messages:{default:"Arrastre un archivo hasta este lugar o de un clic para seleccionar uno",replace:"Arrastre un archivo hasta este lugar o de un clic para seleccionar uno",remove:"Quitar",error:"Ups! parece que algo no esta bien"},error:{fileSize:"El archivo es demasiado grande. ({{ value }} maximo).",minWidth:"La imagen es muy pequeña. ({{ value }}}px minimo).",maxWidth:"El ancho de la imagen es muy grande. ({{ value }}}px maximo).",minHeight:"El alto de la imagen es muy pequeño. ({{ value }}}px minimo).",maxHeight:"El alto de la imagen es muy grande. ({{ value }}px maximo).",imageFormat:"Este formato no esta permitido. ({{ value }} unicamente)."}})});
